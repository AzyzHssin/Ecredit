
<form>

    <p-fieldset legend="Information Client">


        <div class="grid">
            <div class="col">
                <div class="text-left p-3 border-round-sm  font-bold">
                    <h5>num cin</h5>
                    <input type="text"
                    (change)="onCinChange()"
                    [(ngModel)]="ncin"
                    name="ncin"
                    maxlength="8" pInputText>
                </div>
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>num de compte</h5>
                    <p-dropdown [options]="bankAccountArray" [(ngModel)]="selectedBankAccount"
                    (onClick)="onSelectingAccount()"
                    name="BankAccount" optionLabel="id"></p-dropdown>
                </div>
            </div>
            <div class="col">
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>nom </h5>
                    <input type="text"
                    disabled="true"
                    [(ngModel)]="nom"
                    name="nom" pInputText>
                </div>
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>devise </h5>
                    <input type="text" [(ngModel)]="devise"  disabled="true" name="devise" pInputText>
                </div>
            </div>
            <div class="col">


                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>prénom</h5>
                    <input type="text"  disabled="true"
                    type="text" [(ngModel)]="prenom" name="prenom" pInputText>
                </div>
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5 for="icon">dateOvertureCompte</h5>
                    <p-calendar [(ngModel)]="dateOvertureCompte"
                    name="dateOvertureCompte" [showIcon]="true" inputId="icon"></p-calendar>

                </div>
                </div>
        </div>


    </p-fieldset>
    <br>
    <p-fieldset legend="Dossier Credit" [toggleable]="true">
        <div class="grid">
            <div class="col-6">
                <div class="text-left p-3 border-round-sm  font-bold">
                    <h5>montant</h5>
                    <input type="text" [(ngModel)]="montant" name="montant" pInputText>

                </div>
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>nbre echeance </h5>

                    <input type="text"
                    [(ngModel)]="nbreEcheance"
                    name="nbreEcheance" pInputText>
                </div>
            </div>
            <div class="col-6">
                <div class="text-left p-3 border-round-sm  font-bold col-4">
                    <h5>Type Credit: </h5>
                    <p-dropdown [(ngModel)]="selectedTypeCredit" [options]="typecreditArray" placeholder="select a type" (onChange)="onSelectTypeCredit()"
                     name="selectedTypeCredit"  optionLabel="nom"></p-dropdown>

                </div>
                <div class="text-left p-3 border-round-sm  font-bold ">
                    <h5>unité </h5>
                    <p-dropdown [options]="uniteArray" optionLabel="nom"></p-dropdown>
                </div>
            </div>
        </div>

<!-- ////////////////////////////////////////////////////////////////////////////////////////////// -->


    </p-fieldset>
    <p-fieldset legend="Garanties Proposées" [toggleable]="true">
        <!-- ::::::::::::::::::::::::::::::::::modal:::::::::::::::::::::::::::::::::::::: -->
        <p-button (click)="showModalDialog()" icon="pi pi-external-link" label="Ajouter garantie"></p-button>
<p-dialog header="Ajouter un nouveau garantie" [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}"
    [draggable]="false" [resizable]="false">
    <span class="ml-2">Nature</span>
    <p-dropdown type="text" [options]="NatureGarantieArray" optionLabel="nom" name="NatureGarantieInput" placeholder="Choisissez une nature guarantie" (onClick)="showStateNature()" [(ngModel)]="NatureGarantieInput"></p-dropdown>
    <span class="ml-2">Type</span>
    <p-dropdown type="text"  [options]="TypeGarantieArray" optionLabel="nom" name="TypeGarantieInput" placeholder="Choisissez un type garantie" (onClick)="showStateTypeGuarantie()" [(ngModel)]="TypeGarantieInput"></p-dropdown>
    <span class="ml-2">Valeur</span>
    <input type="text" pInputText [(ngModel)]="ValeurGarantieInput" placeholder="Donner une valeur du garantie" name="ValeurGarantieInput">
    <span class="ml-2">Devise</span>
    <p-dropdown type="text"  [options]="DeviseGarantieArray" optionLabel="nom" name="DeviseGarantieInput"placeholder="Choisissez une devise de garantie" (onClick)="showStateDeviseGarantie()" [(ngModel)]="DeviseGarantieInput"></p-dropdown>


        <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" (click)="displayModal=false" label="Ok" styleClass="p-button-text" placeholder="" (onClick)="onConfirmDialog()"></p-button>
        </ng-template>
</p-dialog>
<!-- ::::::::::::::::::::::::::::::::::modal:::::::::::::::::::::::::::::::::::::: -->
        <p-table [value]="guarantiesArrayOfDemand" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th>Nature</th>
                    <th>Type</th>
                    <th>Valeur</th>
                    <th>Devise</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-g>
                <tr>
                    <th>{{g.natureGuarantie}}</th>
                    <td>{{g.typeGuarantie}}</td>
                    <td>{{g.valeur}}</td>
                    <td>{{g.devise}}</td>
                    <td>
                        <button pButton pRipple icon="pi pi-pencil" id="editbutton" class="p-button-rounded p-button-success mr-2" ></button>
                        <button (click)="showMaximizableDialog()" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" ></button>
                        <p-dialog header="supprimer " [(visible)]="displayMaximizable" [modal]="true" [style]="{width: '50vw'}" [maximizable]="true"
                        [draggable]="false" [resizable]="false">

                         <ng-template pTemplate="footer">
                        <p-button icon="pi pi-check" (click)="displayMaximizable=false" label="Ok" styleClass="p-button-text"></p-button>
                        </ng-template>
                        </p-dialog>
                      </td>
                </tr>


            </ng-template>
        </p-table>
    </p-fieldset>
    <p-fieldset legend="Pieces jointes" [toggleable]="true">
        <p-table [value]="PieceJointeArray" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th>Document</th>
                    <th>oblgatoire</th>
                </tr>
            </ng-template>
              <ng-template pTemplate="body" let-document>
                <tr>
                  <td>{{ document.nom }}</td>
                  <td>
                    <ng-container *ngIf="obligedDocuments.includes(document.nom)">oui</ng-container>
                    <ng-container *ngIf="!obligedDocuments.includes(document.nom)">non</ng-container>
                  </td>

                </tr>
              </ng-template>


        </p-table>

        <p-fileUpload  (change)="onFileChange($event)"
        type="file" name="myfile[]" url="./upload.php"></p-fileUpload>
    </p-fieldset>


    <p-fieldset legend="Observation" [toggleable]="true">
        <textarea pInputTextarea [(ngModel)]="observation" id="text" placeholder="your text is here"></textarea>
    </p-fieldset>
   </form>
